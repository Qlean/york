`york-analytics` - это набор компонентов и утилит, призванный упростить сбор аналитических данных.

### Как это работает?

Вся система работает через React Context. Ключевым модулем является `AnalyticsProvider`, который передает дочерним элементам аналитический контекст. Провайдеры можно бесконечно вкладывать друг в друга, создавая новые контексты, при этом дочерние элементы будут брать информацию из ближайшего к ним провайдера.

### Как выглядит аналитическое событие?

Событие - это объект с такой структурой:

```js static
{
  category: String, // Категория события, как правило совпадает с названием экрана или страницы
  label: String, // Название элемента, отправляющего событие
  action: String, // Название действия
  properties: Object // Дополнительные данные, которые нужно прикрепить к событию (id заказа, адрес и т.д.)
}

// Примеры:

{
  category: 'DateTime',
  label: 'DateTime',
  action: 'mount',
  properties: {
    orderId: '123',
  }
}

{
  category: 'DateTime',
  label: 'nextButton',
  action: 'click',
}
```

Объект `properties` всегда содержит как минимум одно свойство - `analyticsRoute`. Это строка, в которой записана иерархия категорий события вплоть до названия приложения. Она генерируется автоматически. Например, если в корневом `AnalyticsProvider` стоит категория 'york', а внутри него есть другой провайдер с категорией 'DateTime', то `analyticsRoute` будет содержать строку 'york.DateTime'. Это позволяет отслеживать место, из которого вызвано событие при переиспользовании компонентов и экранов.

### Как события отправляются на сервер?

В `AnalyticsProvider` можно передать проп `trackEvent: Function` - функцию, которая передает события в транспорт. Транспорт может быть разный у разных приложений. `trackEvent` можно передать в любой провайдер (например если в какой-то части приложения нужно использовать другой трекинг), но необходимо сделать это как минимум в самом первом. После передачи этой функции, все дочерние провайдеры и подключенные компоненты получат к ней доступ через контекст.
